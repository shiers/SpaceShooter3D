//
// Diploma of Interactive Gaming
// Game Development Faculty
// Media Design School
// Auckland
// New Zealand
// 
// (c) 2008 Media Design School
// 
// File Name      :   camera.h
// Description    :   Camera Interface
// Author         :   Shawn Shiers
// Mail           :   shawn@dryad.ca
// 

#pragma once

#ifndef __CAMERA_H__
#define __CAMERA_H__

// Library Includes
#include <d3d9.h>
#include <d3dx9.h>

// Local Includes
#include "defines.h"

// Types
typedef enum
{
	INVALID_CAMERAMODE,
	CAMMODE_ORTHOGONAL,
	CAMMODE_PERSPECTIVE,
	MAX_CAMERAMODE
}ECameraMode;

typedef enum
{
	INVALID_CAMERATYPE,
	CAMERA_DEBUG,
	CAMERA_TOPDOWN,
	MAX_CAMERATYPE
}ECameraType;

typedef enum
{
	INVALID_CAMERA_ATTRIBUTE,
	ROTATION_MOVE = 5,
	CAMERA_MOVE = 100,
	MAX_CAMERA_ATTRIBUTE,
}ECameraAttribute;

// Constants

// Prototypes
class IViewport;
class IRenderer;

class ICamera
{
	// Member Functions
public:
	ICamera::ICamera()
	{
		// Constructor
	}

	ICamera::~ICamera()
	{
		// Deconstructor
	}

	/**
	*
	* This function initialises the camera system.
	*
	* @author Shawn Shiers
	* @param _pViewport This is the Viewport.
	* @param _fFOV This is the Field of view.
	* @param _eMode This is the Camera Mode (ie. Perspective).
	* @param _eType This is the type of camera (ie. Debug).
	* @param _fNearClip This is the the Near clipping value.
	* @param _fFarClip This is the Far clipping value.
	* @param _uiID This is the camera ID.
	* @return Returns true if successful.
	*
	*/
	virtual bool Initialise(IViewport* _pViewport,
							Float32 _fFOV,
							ECameraMode _eMode,
							ECameraType _Type,
							Float32 _fNearClip,
							Float32 _fFarClip,
							UInt32 _uiID,
							IRenderer* _pRenderer) = 0;

	/**
	*
	* This function is resposible for doing any processing that the camera
	* requires.
	*
	* @author Shawn Shiers
	* @param _fDeltaTick is the amount of time elapsed between frames.
	* @return Returns void.
	*
	*/
	virtual void Process (Float32 _fDeltaTick) = 0;

	/**
	*
	* This function sets the clipping planes.
	*
	* @author Shawn Shiers
	* @param _fNear This is the the Near clipping value.
	* @param _fFar This is the the Far clipping value.
	* @return Returns void.
	*
	*/
	virtual void SetClipPlanes(Float32 _fNear,
							   Float32 _fFar) = 0;

	/**
	*
	* This function gets the near clipping plane.
	*
	* @author Shawn Shiers
	* @return Returns the near clipping plane.
	*
	*/
	virtual Float32 GetNearPlane() const = 0;

	/**
	*
	* This function gets the near far plane.
	*
	* @author Shawn Shiers
	* @return Returns the far clipping plane.
	*
	*/
	virtual Float32 GetFarPlane() const = 0;

	/**
	*
	* This function sets the Field of view.
	*
	* @author Shawn Shiers
	* param _fFOV this is the Field of view value
	* @return Returns void.
	*
	*/
	virtual void SetFOV(Float32 _fFOV) = 0;
	
	/**
	*
	* This function sets the view matrix.
	*
	* @author Shawn Shiers
	* param _rvectRight is the right vector
	* param _rvectUp is the up vector
	* param _rvectDir is the direction vector
	* param _rvectPos is the position vector
	* @return Returns void.
	*
	*/
	virtual void SetView3D(D3DXVECTOR3& _rvectRight,
						   D3DXVECTOR3& _rvectUp,
						   D3DXVECTOR3& _rvectDir,
						   D3DXVECTOR3& _rvectPos) = 0;

	/**
	*
	* This function converts between LookAt and setting the 3D view.
	*
	* @author Shawn Shiers
	* param _rvectPos is the position vector
	* param _rvectLook is the look vector
	* param _rvectUp is the up vector
	* @return Returns void.
	*
	*/
	virtual void SetViewLookAt(D3DXVECTOR3& _rvectPos,
							   D3DXVECTOR3& _rvectLook,
							   D3DXVECTOR3& _rvectUp) = 0;

	/**
	*
	* This function sets the world matrix.
	*
	* @author Shawn Shiers
	* param _rmatWorld is a reference to a D3DXMATRIX
	* @return Returns void.
	*
	*/
	virtual void SetWorldMatrix(D3DXMATRIX& _rmatWorld) = 0;

	/**
	*
	* This function sets the view matrix.
	*
	* @author Shawn Shiers
	* param _rmatView is a reference to a D3DXMATRIX
	* @return Returns void.
	*
	*/
	virtual void SetViewMatrix(D3DXMATRIX& _rmatView) = 0;

	/**
	*
	* This function sets the projection matrix.
	*
	* @author Shawn Shiers
	* param _rmatProj is a reference to a D3DXMATRIX
	* @return Returns void.
	*
	*/
	virtual void SetProjMatrix(D3DXMATRIX& _rmatProj) = 0;

	/**
	*
	* This function sets the camera mode.
	*
	* @author Shawn Shiers
	* @param _eMode This is the Camera Mode (ie. Perspective).
	* @return Returns void.
	*
	*/
	virtual void SetMode(ECameraMode _eMode) = 0;

	/**
	*
	* This function sets the camera type.
	*
	* @author Shawn Shiers
	* @param _eType This is the type of camera (ie. Debug).
	* @return Returns void.
	*
	*/
	virtual void SetType(ECameraType _eType) = 0;

	/**
	*
	* This function calculates the View Projection matrix.
	*
	* @author Shawn Shiers
	* @return Returns void.
	*
	*/
	virtual void CalcViewProj() = 0;

	/**
	*
	* This function calculates the World View Projection matrix.
	*
	* @author Shawn Shiers
	* @return Returns void.
	*
	*/
	virtual void CalcWorldViewProj() = 0;

	/**
	*
	* This function resets the matrices.
	*
	* @author Shawn Shiers
	* @return Returns void.
	*
	*/
	virtual void ResetMatrices() = 0;

	/**
	*
	* This function gets the position of the camera.
	*
	* @author Shawn Shiers
	* @return Returns a reference to a D3DXVECTOR3.
	*
	*/
	virtual D3DXVECTOR3& GetPosition() = 0;

	/**
	*
	* This function gets the View matrix.
	*
	* @author Shawn Shiers
	* @return Returns a pointer to a D3DXMATRIX.
	*
	*/
	virtual D3DXMATRIX* GetViewMatrix() = 0;

	/**
	*
	* This function gets the Projection matrix.
	*
	* @author Shawn Shiers
	* @return Returns a pointer to a D3DXMATRIX.
	*
	*/
	virtual D3DXMATRIX* GetProjMatrix() = 0;

	/**
	*
	* This function gets the World matrix.
	*
	* @author Shawn Shiers
	* @return Returns a pointer to a D3DXMATRIX.
	*
	*/
	virtual D3DXMATRIX* GetWorldMatrix() = 0;

	/**
	*
	* This function updates the renderer.
	*
	* @author Shawn Shiers
	* @return Returns void.
	*
	*/
	virtual void UpdateRenderer() = 0;

protected:

private:

	// Member Variables
public:

protected:

private:

};
#endif // __CAMERA_H__
